---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import Section from '../components/Section.astro';

const requirements = [
  { title: 'Eligible organization', description: 'Non-profit, government agency, or educational institution' },
  { title: 'Open source commitment', description: 'Maintain AGPL-3.0 licensing for modifications' },
  { title: 'Code of conduct', description: 'Support the civic mission of the network' },
  { title: 'Technical capability', description: 'Ability to deploy and maintain on cloud infrastructure' },
];

const steps = [
  { step: '01', title: 'Fork the repository', code: 'git clone https://github.com/your-org/qckstrt.git' },
  { step: '02', title: 'Create your region provider', code: 'mkdir -p packages/region-provider-yourstate' },
  { step: '03', title: 'Deploy your instance', code: 'cd infra && terraform apply' },
  { step: '04', title: 'Request membership', code: null },
];

const costs = [
  { tier: 'Starter', use: 'Development', cost: '$100-200' },
  { tier: 'Standard', use: 'Production', cost: '$460-610' },
  { tier: 'Enterprise', use: 'High traffic', cost: '$800-1,200' },
];

const faqs = [
  { q: 'Do I need to join the network?', a: 'No. The platform is open source. The network provides optional benefits like subdomains and community support.' },
  { q: 'Can I use my own domain?', a: 'Yes. The *.commonwealthlabs.io subdomain is optional.' },
  { q: 'Is commercial support available?', a: 'Yes. See the Commercial Licensing options for dedicated support and SLAs.' },
];
---

<BaseLayout title="Join" description="Learn how to deploy the Commonwealth Labs platform for your jurisdiction.">
  <Hero
    title="Join"
    subtitle="Deploy civic technology for your jurisdiction and become part of a growing network."
  />

  <Section title="Requirements">
    <div class="grid md:grid-cols-2 gap-6">
      {requirements.map(req => (
        <div class="border-l-2 border-slate-dark/10 pl-6">
          <h3 class="font-medium mb-1">{req.title}</h3>
          <p class="text-slate-dark/80 text-sm">{req.description}</p>
        </div>
      ))}
    </div>
  </Section>

  <Section
    title="How to join"
    background="gray"
  >
    <div class="space-y-10">
      {steps.map(step => (
        <div class="flex gap-6">
          <div class="text-sm font-medium text-slate-dark w-8">{step.step}</div>
          <div class="flex-1">
            <h3 class="font-medium mb-2">{step.title}</h3>
            {step.code && (
              <code class="block text-xs text-slate-dark/80 bg-white px-4 py-3 rounded font-mono">
                {step.code}
              </code>
            )}
          </div>
        </div>
      ))}
    </div>

    <div class="mt-12">
      <a
        href="https://github.com/rodneygagnon/qckstrt/blob/main/docs/guides/region-provider.md"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center bg-slate-dark text-white border border-white px-5 py-2.5 rounded-md hover:bg-slate-dark/90 transition-colors text-sm font-medium"
      >
        Read the Full Guide
      </a>
    </div>
  </Section>

  <Section title="Infrastructure costs">
    <p class="text-slate-dark/80 text-sm mb-8">Monthly estimates. Each member manages their own infrastructure.</p>
    <div class="space-y-3">
      {costs.map(cost => (
        <div class="flex justify-between py-3 border-b border-slate-dark/5 last:border-0">
          <div>
            <span class="font-medium">{cost.tier}</span>
            <span class="text-slate-dark/80 text-sm ml-3">{cost.use}</span>
          </div>
          <span class="text-slate-dark/80">{cost.cost}/mo</span>
        </div>
      ))}
    </div>
  </Section>

  <Section background="dark">
    <div class="max-w-xl">
      <h2 class="text-2xl font-semibold mb-4 tracking-tight">Request membership</h2>
      <p class="text-white/70 mb-6">
        Once deployed, open a GitHub issue with your organization name, jurisdiction, contact info, and desired subdomain.
      </p>
      <a
        href="https://github.com/rodneygagnon/qckstrt/issues/new?labels=network-membership"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center bg-slate-dark text-white border border-white px-5 py-2.5 rounded-md hover:bg-slate-dark/90 transition-colors text-sm font-medium"
      >
        Request Membership
      </a>
    </div>
  </Section>

  <Section title="FAQ">
    <div class="space-y-8 max-w-2xl">
      {faqs.map(faq => (
        <div>
          <h3 class="font-medium mb-2">{faq.q}</h3>
          <p class="text-slate-dark/80 text-sm">{faq.a}</p>
        </div>
      ))}
    </div>
  </Section>
</BaseLayout>
